"use strict";(globalThis.webpackChunkflowra_docs=globalThis.webpackChunkflowra_docs||[]).push([[263],{1857:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"data/migrations-and-seeds","title":"Migrations & Seeds","description":"Create, run, and manage database migrations and seeds with the Flowra CLI.","source":"@site/docs/data/migrations-and-seeds.mdx","sourceDirName":"data","slug":"/data/migrations-and-seeds","permalink":"/docs/data/migrations-and-seeds","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Migrations & Seeds","description":"Create, run, and manage database migrations and seeds with the Flowra CLI."},"sidebar":"docsSidebar","previous":{"title":"Models & Queries","permalink":"/docs/data/models-and-queries"},"next":{"title":"CLI Overview","permalink":"/docs/cli/overview"}}');var t=n(4848),i=n(8453);const r={title:"Migrations & Seeds",description:"Create, run, and manage database migrations and seeds with the Flowra CLI."},l=void 0,d={},o=[{value:"Create a migration",id:"create-a-migration",level:2},{value:"Run migrations",id:"run-migrations",level:2},{value:"Roll back",id:"roll-back",level:2},{value:"Migration status",id:"migration-status",level:2},{value:"Seeds",id:"seeds",level:2},{value:"Example migration",id:"example-migration",level:2}];function c(e){const a={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.p,{children:["Flowra wraps Knex migrations and seeds with CLI commands that read ",(0,t.jsx)(a.code,{children:"orm.cli.config.js"}),"."]}),"\n",(0,t.jsx)(a.h2,{id:"create-a-migration",children:"Create a migration"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"flowra db:migrate:make create_users_table\n"})}),"\n",(0,t.jsxs)(a.p,{children:["By default, migrations are stored in ",(0,t.jsx)(a.code,{children:"app/Database/Migrations"}),"."]}),"\n",(0,t.jsx)(a.h2,{id:"run-migrations",children:"Run migrations"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"flowra db:migrate:latest\n"})}),"\n",(0,t.jsx)(a.h2,{id:"roll-back",children:"Roll back"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"flowra db:rollback\nflowra db:rollback --all\n"})}),"\n",(0,t.jsx)(a.h2,{id:"migration-status",children:"Migration status"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"flowra db:status\n"})}),"\n",(0,t.jsx)(a.h2,{id:"seeds",children:"Seeds"}),"\n",(0,t.jsx)(a.p,{children:"Create a seed:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"flowra db:seed:make seed_users\n"})}),"\n",(0,t.jsx)(a.p,{children:"Run seeds:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"flowra db:seed:run\n"})}),"\n",(0,t.jsx)(a.h2,{id:"example-migration",children:"Example migration"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-js",metastring:'title="app/Database/Migrations/20251025213153_create_table_users.js"',children:"exports.up = function(knex) {\n  return knex.schema.createTable('users', function(table) {\n    table.increments('id').primary();\n    table.string('username').notNullable().unique();\n    table.string('email').notNullable().unique();\n    table.string('password').notNullable();\n    table.timestamp('createdAt').nullable();\n    table.timestamp('updatedAt').nullable();\n    table.timestamp('deletedAt').nullable();\n  });\n};\n\nexports.down = function(knex) {\n  return knex.schema.dropTableIfExists('users');\n};\n"})}),"\n",(0,t.jsx)(a.admonition,{title:"Connection aliases",type:"note",children:(0,t.jsxs)(a.p,{children:["Use ",(0,t.jsx)(a.code,{children:"--env <alias>"})," on migration and seed commands to target a specific database configuration."]})})]})}function u(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>r,x:()=>l});var s=n(6540);const t={},i=s.createContext(t);function r(e){const a=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:a},e.children)}}}]);