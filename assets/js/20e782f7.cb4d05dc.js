"use strict";(globalThis.webpackChunkflowra_docs=globalThis.webpackChunkflowra_docs||[]).push([[10],{5029:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"architecture/request-lifecycle","title":"Request Lifecycle","description":"Follow a request from the Flowra CLI through the container, middleware, and module routes.","source":"@site/docs/architecture/request-lifecycle.mdx","sourceDirName":"architecture","slug":"/architecture/request-lifecycle","permalink":"/docs/architecture/request-lifecycle","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Request Lifecycle","description":"Follow a request from the Flowra CLI through the container, middleware, and module routes."},"sidebar":"docsSidebar","previous":{"title":"Environment Variables","permalink":"/docs/configuration/environment"},"next":{"title":"Service Container","permalink":"/docs/architecture/service-container"}}');var s=t(4848),o=t(8453);const i={title:"Request Lifecycle",description:"Follow a request from the Flowra CLI through the container, middleware, and module routes."},l=void 0,c={},d=[{value:"Startup flow",id:"startup-flow",level:2},{value:"Per-request flow",id:"per-request-flow",level:2},{value:"Key files",id:"key-files",level:2}];function a(e){const r={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"Every Flowra request follows the same pipeline, which keeps behavior consistent and easy to reason about."}),"\n",(0,s.jsx)(r.h2,{id:"startup-flow",children:"Startup flow"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"flowra serve"})," loads ",(0,s.jsx)(r.code,{children:"app/Bootstrap/server.bootstrap.js"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"buildContainer()"})," composes the container by calling:","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"registerCore()"})," (config, logger, validation)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"registerInfrastructure()"})," (database, cache, queue, mailer)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"registerModules()"})," (module scopes and routes)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:"Express is configured with middleware (helmet, compression, parsers, static files)."}),"\n",(0,s.jsxs)(r.li,{children:["Module routes are registered via ",(0,s.jsx)(r.code,{children:"app/Http/http.router.js"}),"."]}),"\n",(0,s.jsx)(r.li,{children:"Not-found and error handlers are attached."}),"\n",(0,s.jsxs)(r.li,{children:["Providers listed in ",(0,s.jsx)(r.code,{children:"app/Config/App.js"})," are loaded."]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"per-request-flow",children:"Per-request flow"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-text",children:"Incoming request\n  -> RequestContextMiddleware (request ID, logger, timing)\n  -> CORS + Morgan logging\n  -> Module routes\n  -> Controller -> Service -> Model/Query\n  -> Response\n  -> ErrorHandler (if an exception occurs)\n"})}),"\n",(0,s.jsx)(r.h2,{id:"key-files",children:"Key files"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"app/Bootstrap/server.bootstrap.js"})," - Express setup and middleware."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"app/Bootstrap/Container/compose.js"})," - Container composition."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"app/Http/http.router.js"})," - Route registration across modules."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"app/Http/Middleware/ErrorHandler.js"})," - Consistent JSON error responses."]}),"\n"]}),"\n",(0,s.jsx)(r.admonition,{title:"Provider hook",type:"note",children:(0,s.jsxs)(r.p,{children:["Providers are a convenient place to register app-wide listeners or boot tasks. Add them in ",(0,s.jsx)(r.code,{children:"app/Config/App.js"}),"."]})})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>l});var n=t(6540);const s={},o=n.createContext(s);function i(e){const r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);