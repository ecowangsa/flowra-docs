"use strict";(globalThis.webpackChunkflowra_docs=globalThis.webpackChunkflowra_docs||[]).push([[704],{6568:(a,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"data/knex-configuration","title":"Konfigurasi Database","description":"Konfigurasikan koneksi Knex dan alias database di Flowra.","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/data/knex-configuration.mdx","sourceDirName":"data","slug":"/data/knex-configuration","permalink":"/id/docs/data/knex-configuration","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Konfigurasi Database","description":"Konfigurasikan koneksi Knex dan alias database di Flowra."},"sidebar":"docsSidebar","previous":{"title":"Validasi & Error","permalink":"/id/docs/routing/validation-and-errors"},"next":{"title":"Models & Queries","permalink":"/id/docs/data/models-and-queries"}}');var s=n(4848),o=n(8453);const t={title:"Konfigurasi Database",description:"Konfigurasikan koneksi Knex dan alias database di Flowra."},r=void 0,d={},l=[{value:"Konfigurasi default",id:"konfigurasi-default",level:2},{value:"Alias koneksi",id:"alias-koneksi",level:2},{value:"Konfigurasi CLI",id:"konfigurasi-cli",level:2},{value:"Ganti database",id:"ganti-database",level:2}];function c(a){const e={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...a.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["Flowra menggunakan Knex di bawahnya. Konfigurasi database berada di ",(0,s.jsx)(e.code,{children:"app/Config/Database.js"})," dan digunakan oleh ",(0,s.jsx)(e.code,{children:"DatabaseManager"}),"."]}),"\n",(0,s.jsx)(e.h2,{id:"konfigurasi-default",children:"Konfigurasi default"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",metastring:'title="app/Config/Database.js"',children:"module.exports = {\n  default: 'default',\n  connections: {\n    default: {\n      client: 'mysql2',\n      connection: {\n        host: process.env.DB_MYSQL_HOST_PRIMARY || process.env.DB_MYSQL_HOST || '127.0.0.1',\n        user: process.env.DB_DEFAULT_USERNAME || 'root',\n        password: process.env.DB_DEFAULT_PASSWORD || '',\n        database: process.env.DB_DEFAULT_DATABASE || 'flowra',\n        port: parseInt(process.env.DB_MYSQL_PORT_PRIMARY || process.env.DB_MYSQL_PORT, 10),\n      },\n    },\n    defaultRead: {\n      client: 'mysql2',\n      connection: {\n        host: process.env.DB_MYSQL_HOST_READONLY || process.env.DB_MYSQL_HOST || '127.0.0.1',\n        user: process.env.DB_DEFAULT_USERNAME || 'root',\n        password: process.env.DB_DEFAULT_PASSWORD || '',\n        database: process.env.DB_DEFAULT_DATABASE || 'flowra',\n      },\n    },\n  },\n};\n"})}),"\n",(0,s.jsx)(e.h2,{id:"alias-koneksi",children:"Alias koneksi"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"default"})," adalah koneksi utama."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"defaultRead"})," digunakan untuk operasi read jika tersedia."]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Services dan models bisa memilih alias koneksi lewat base class ",(0,s.jsx)(e.code,{children:"Service"}),"."]}),"\n",(0,s.jsx)(e.h2,{id:"konfigurasi-cli",children:"Konfigurasi CLI"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"orm.cli.config.js"})," membaca konfigurasi database dan memetakannya ke perintah Knex CLI. Anda bisa override nama koneksi dengan environment variable seperti ",(0,s.jsx)(e.code,{children:"KNEX_CONNECTION"}),"."]}),"\n",(0,s.jsx)(e.h2,{id:"ganti-database",children:"Ganti database"}),"\n",(0,s.jsxs)(e.p,{children:["Untuk memakai PostgreSQL atau database lain, ubah nilai ",(0,s.jsx)(e.code,{children:"client"})," dan ",(0,s.jsx)(e.code,{children:"connection"})," di ",(0,s.jsx)(e.code,{children:"app/Config/Database.js"}),". Bagian lain tetap sama."]}),"\n",(0,s.jsx)(e.admonition,{title:"Satu sumber kebenaran",type:"tip",children:(0,s.jsxs)(e.p,{children:["Flowra membaca dari ",(0,s.jsx)(e.code,{children:"app/Config/Database.js"})," saat runtime dan dari ",(0,s.jsx)(e.code,{children:"orm.cli.config.js"})," untuk migrasi CLI, jadi Anda hanya menjaga satu sumber kebenaran."]})})]})}function u(a={}){const{wrapper:e}={...(0,o.R)(),...a.components};return e?(0,s.jsx)(e,{...a,children:(0,s.jsx)(c,{...a})}):c(a)}},8453:(a,e,n)=>{n.d(e,{R:()=>t,x:()=>r});var i=n(6540);const s={},o=i.createContext(s);function t(a){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof a?a(e):{...e,...a}},[e,a])}function r(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(s):a.components||s:t(a.components),i.createElement(o.Provider,{value:e},a.children)}}}]);