"use strict";(globalThis.webpackChunkflowra_docs=globalThis.webpackChunkflowra_docs||[]).push([[139],{8453:(n,e,r)=>{r.d(e,{R:()=>t,x:()=>o});var a=r(6540);const i={},s=a.createContext(i);function t(n){const e=a.useContext(s);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),a.createElement(s.Provider,{value:e},n.children)}},9921:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"routing/validation-and-errors","title":"Validasi & Error","description":"Validasi data masuk dan kembalikan response error yang konsisten di Flowra.","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/routing/validation-and-errors.mdx","sourceDirName":"routing","slug":"/routing/validation-and-errors","permalink":"/id/docs/routing/validation-and-errors","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Validasi & Error","description":"Validasi data masuk dan kembalikan response error yang konsisten di Flowra."},"sidebar":"docsSidebar","previous":{"title":"Routes & Controllers","permalink":"/id/docs/routing/routes-and-controllers"},"next":{"title":"Konfigurasi Database","permalink":"/id/docs/data/knex-configuration"}}');var i=r(4848),s=r(8453);const t={title:"Validasi & Error",description:"Validasi data masuk dan kembalikan response error yang konsisten di Flowra."},o=void 0,d={},l=[{value:"Aturan validasi",id:"aturan-validasi",level:2},{value:"Error handling",id:"error-handling",level:2},{value:"Not found",id:"not-found",level:3}];function c(n){const e={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"Flowra menyediakan helper validasi dan format response error yang konsisten."}),"\n",(0,i.jsx)(e.h2,{id:"aturan-validasi",children:"Aturan validasi"}),"\n",(0,i.jsxs)(e.p,{children:["Helper validasi berada di ",(0,i.jsx)(e.code,{children:"app/Config/Validation.js"})," dan mendukung aturan seperti:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"required"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"minLength"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"is_email"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"alpha_numeric"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"alpha_numeric_space"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"valid_url"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"valid_ip"})}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"is_unique"})," (cek ",(0,i.jsx)(e.code,{children:"table.column"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["Gunakan ",(0,i.jsx)(e.code,{children:"validationFactory"})," dari container untuk membuat validator di service atau controller:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",metastring:'title="app/Modules/Users/Users.service.js"',children:"const HttpError = require('../../Errors/HttpError');\n\nclass UsersService {\n  constructor({ validationFactory } = {}) {\n    this.validationFactory = validationFactory;\n  }\n\n  get rules() {\n    return {\n      username: { required: true, alpha_numeric: true },\n      email: { required: true, is_email: true, is_unique: 'users.email' },\n      password: { required: true, minLength: 8 },\n    };\n  }\n\n  async create(payload) {\n    const validator = this.validationFactory(this.rules);\n    const errors = await validator.validate(payload);\n    if (errors.length > 0) {\n      throw new HttpError(422, 'Validation failed', errors);\n    }\n\n    // Persist payload...\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,i.jsxs)(e.p,{children:["Flowra membungkus error dengan ",(0,i.jsx)(e.code,{children:"HttpError"})," dan mengembalikan response JSON yang konsisten lewat middleware ",(0,i.jsx)(e.code,{children:"ErrorHandler"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "code": "E_HTTP_ERROR",\n  "statusCode": 500,\n  "message": "Internal server error",\n  "details": {\n    "stack": "..."\n  },\n  "timestamp": "2026-02-03T00:00:00.000Z",\n  "path": "/users/list",\n  "requestId": "..."\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"not-found",children:"Not found"}),"\n",(0,i.jsxs)(e.p,{children:["Middleware not-found melempar ",(0,i.jsx)(e.code,{children:"HttpError(404, ...)"})," agar response konsisten."]}),"\n",(0,i.jsx)(e.admonition,{title:"Tetap eksplisit",type:"tip",children:(0,i.jsxs)(e.p,{children:["Gunakan ",(0,i.jsx)(e.code,{children:"HttpError"})," untuk kegagalan yang terduga (validasi, permissions). Biarkan error tak terduga masuk ke handler."]})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}}}]);