"use strict";(globalThis.webpackChunkflowra_docs=globalThis.webpackChunkflowra_docs||[]).push([[330],{2250:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"routing/routes-and-controllers","title":"Routes & Controllers","description":"Definisikan Express routes di dalam modul dan resolve controller dari container.","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/routing/routes-and-controllers.mdx","sourceDirName":"routing","slug":"/routing/routes-and-controllers","permalink":"/id/docs/routing/routes-and-controllers","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Routes & Controllers","description":"Definisikan Express routes di dalam modul dan resolve controller dari container."},"sidebar":"docsSidebar","previous":{"title":"Modules","permalink":"/id/docs/architecture/modules"},"next":{"title":"Validasi & Error","permalink":"/id/docs/routing/validation-and-errors"}}');var o=n(4848),t=n(8453);const i={title:"Routes & Controllers",description:"Definisikan Express routes di dalam modul dan resolve controller dari container."},l=void 0,a={},c=[{value:"Mendefinisikan routes",id:"mendefinisikan-routes",level:2},{value:"Controllers",id:"controllers",level:2},{value:"Render view",id:"render-view",level:2}];function u(e){const r={code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.p,{children:"Route Flowra berada di dalam modul. HTTP router akan memeriksa semua modul yang aktif dan memasang routes ke Express."}),"\n",(0,o.jsx)(r.h2,{id:"mendefinisikan-routes",children:"Mendefinisikan routes"}),"\n",(0,o.jsx)(r.p,{children:"File route menerima Express router dan container:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",metastring:'title="app/Modules/Users/users.routes.js"',children:"'use strict';\nconst group = require('routergroup');\n\nfunction registerUsersRoutes({ router, container } = {}) {\n  if (!router || !container) {\n    return router;\n  }\n\n  const controller = container.resolve('modules.users.controllers.main');\n\n  router.use(\n    group('/users', (router) => {\n      router.get('/list', controller.list.bind(controller));\n      router.post('/create', controller.create.bind(controller));\n    })\n  );\n\n  return router;\n}\n\nmodule.exports = registerUsersRoutes;\n"})}),"\n",(0,o.jsxs)(r.p,{children:["Flowra memakai ",(0,o.jsx)(r.code,{children:"routergroup"})," untuk menjaga prefix route konsisten, tetapi Anda bisa memakai Express routes biasa."]}),"\n",(0,o.jsx)(r.h2,{id:"controllers",children:"Controllers"}),"\n",(0,o.jsx)(r.p,{children:"Controller mengenkapsulasi logic request. Dependency diberikan lewat constructor:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",metastring:'title="app/Modules/Users/Users.controller.js"',children:"const BaseController = require('../Shared/controllers/BaseController');\nconst HttpError = require('../../Errors/HttpError');\n\nclass UsersController extends BaseController {\n  constructor({ logger, usersService } = {}) {\n    super({ logger });\n    this.logger = logger;\n    this.usersService = usersService;\n  }\n\n  list = async (req, res, next) => {\n    try {\n      const users = await this.usersService.list();\n      res.status(200).json({ message: 'Success', data: users });\n    } catch (error) {\n      if (!(error instanceof HttpError)) {\n        this.logger?.error('http.users.list.failed', { message: error.message });\n      }\n      next(error);\n    }\n  };\n}\n\nmodule.exports = UsersController;\n"})}),"\n",(0,o.jsx)(r.h2,{id:"render-view",children:"Render view"}),"\n",(0,o.jsx)(r.p,{children:"Modul juga bisa merender view. Misalnya, modul Welcome mengembalikan template EJS:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",metastring:'title="app/Modules/Welcome/Welcome.controller.js"',children:"class WelcomeController {\n  async index(req, res, next) {\n    try {\n      const context = await this.welcomeService.getLandingPageContext();\n      return res.render('welcome', context);\n    } catch (error) {\n      next(error);\n    }\n  }\n}\n"})}),"\n",(0,o.jsx)(r.p,{children:"Flowra menjaga layer routing tetap tipis agar controller dan service fokus pada business logic."})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>l});var s=n(6540);const o={},t=s.createContext(o);function i(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);