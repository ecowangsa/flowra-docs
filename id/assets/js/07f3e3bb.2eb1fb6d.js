"use strict";(globalThis.webpackChunkflowra_docs=globalThis.webpackChunkflowra_docs||[]).push([[857],{7252:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"examples/users-api","title":"Contoh: Users API","description":"Perluas modul Users bawaan menjadi CRUD API sederhana.","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/examples/users-api.mdx","sourceDirName":"examples","slug":"/examples/users-api","permalink":"/id/docs/examples/users-api","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Contoh: Users API","description":"Perluas modul Users bawaan menjadi CRUD API sederhana."},"sidebar":"docsSidebar","previous":{"title":"FAQ","permalink":"/id/docs/faq/"},"next":{"title":"JWT Auth + File Uploads","permalink":"/id/docs/examples/jwt-multer"}}');var s=r(4848),t=r(8453);const o={title:"Contoh: Users API",description:"Perluas modul Users bawaan menjadi CRUD API sederhana."},d=void 0,l={},i=[{value:"1. Jalankan migration",id:"1-jalankan-migration",level:2},{value:"2. Update routes",id:"2-update-routes",level:2},{value:"3. Tambahkan logic update dan delete",id:"3-tambahkan-logic-update-dan-delete",level:2},{value:"4. Jalankan dan uji",id:"4-jalankan-dan-uji",level:2}];function u(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Contoh ini membangun di atas modul Users default yang ada pada proyek Flowra baru."}),"\n",(0,s.jsx)(n.h2,{id:"1-jalankan-migration",children:"1. Jalankan migration"}),"\n",(0,s.jsxs)(n.p,{children:["Scaffold sudah menyertakan migration untuk tabel ",(0,s.jsx)(n.code,{children:"users"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"flowra db:migrate:latest\n"})}),"\n",(0,s.jsx)(n.h2,{id:"2-update-routes",children:"2. Update routes"}),"\n",(0,s.jsx)(n.p,{children:"Ubah routes Users ke bentuk RESTful:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="app/Modules/Users/users.routes.js"',children:"'use strict';\nconst group = require('routergroup');\n\nmodule.exports = ({ router, container } = {}) => {\n  if (!router || !container) {\n    return router;\n  }\n\n  const controller = container.resolve('modules.users.controllers.main');\n\n  router.use(\n    group('/users', (router) => {\n      router.get('/', controller.list.bind(controller));\n      router.post('/', controller.create.bind(controller));\n      router.put('/:id', controller.update.bind(controller));\n      router.delete('/:id', controller.destroy.bind(controller));\n    })\n  );\n\n  return router;\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3-tambahkan-logic-update-dan-delete",children:"3. Tambahkan logic update dan delete"}),"\n",(0,s.jsxs)(n.p,{children:["Perluas controller dan service dengan metode ",(0,s.jsx)(n.code,{children:"update"})," dan ",(0,s.jsx)(n.code,{children:"destroy"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="app/Modules/Users/Users.controller.js"',children:"update = async (req, res, next) => {\n  try {\n    const result = await this.usersService.update(req.params.id, req.body);\n    res.json({ message: 'Updated', data: result });\n  } catch (error) {\n    next(error);\n  }\n};\n\ndestroy = async (req, res, next) => {\n  try {\n    await this.usersService.destroy(req.params.id);\n    res.status(204).end();\n  } catch (error) {\n    next(error);\n  }\n};\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="app/Modules/Users/Users.service.js"',children:"async update(id, payload) {\n  return this.userModel.update(id, payload);\n}\n\nasync destroy(id) {\n  return this.userModel.delete(id);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"4-jalankan-dan-uji",children:"4. Jalankan dan uji"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,s.jsx)(n.p,{children:"Sekarang Anda bisa memanggil:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"GET /users"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"POST /users"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"PUT /users/:id"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DELETE /users/:id"})}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Langkah berikutnya",type:"tip",children:(0,s.jsxs)(n.p,{children:["Coba tambahkan aturan validasi di ",(0,s.jsx)(n.code,{children:"update()"})," atau buat query class untuk reporting."]})})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>d});var a=r(6540);const s={},t=a.createContext(s);function o(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);