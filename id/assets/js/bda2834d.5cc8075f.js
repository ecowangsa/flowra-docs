"use strict";(globalThis.webpackChunkflowra_docs=globalThis.webpackChunkflowra_docs||[]).push([[823],{6045:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"architecture/service-container","title":"Service Container","description":"Flowra me-resolve dependency melalui container dengan scoped module registrations.","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/architecture/service-container.mdx","sourceDirName":"architecture","slug":"/architecture/service-container","permalink":"/id/docs/architecture/service-container","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Service Container","description":"Flowra me-resolve dependency melalui container dengan scoped module registrations."},"sidebar":"docsSidebar","previous":{"title":"Request Lifecycle","permalink":"/id/docs/architecture/request-lifecycle"},"next":{"title":"Modules","permalink":"/id/docs/architecture/modules"}}');var i=r(4848),t=r(8453);const a={title:"Service Container",description:"Flowra me-resolve dependency melalui container dengan scoped module registrations."},o=void 0,c={},l=[{value:"Cara kerja",id:"cara-kerja",level:2},{value:"Scope modul",id:"scope-modul",level:2},{value:"Highlight API container",id:"highlight-api-container",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Flowra menggunakan container ringan yang mendukung function, value, dan resolver gaya Awilix. Ini menjaga dependency resolution tetap eksplisit dan mudah dites."}),"\n",(0,i.jsx)(n.h2,{id:"cara-kerja",children:"Cara kerja"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"container.register(name, factory)"})," mendaftarkan dependency."]}),"\n",(0,i.jsxs)(n.li,{children:["Dependency ",(0,i.jsx)(n.strong,{children:"singleton secara default"})," kecuali diubah."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"container.createScope(prefix)"})," membuat scope bernama untuk modul."]}),"\n",(0,i.jsx)(n.li,{children:"Scope bisa mendaftarkan objek bertingkat, lalu diakses sebagai dot-notation keys."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"scope-modul",children:"Scope modul"}),"\n",(0,i.jsxs)(n.p,{children:["Modul didaftarkan di namespace ",(0,i.jsx)(n.code,{children:"modules.<name>"}),". Contoh modul Users:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="app/Modules/Users/users.container.js"',children:"const { asClass, asValue } = require('awilix');\nconst UsersService = require('./Users.service');\nconst UsersController = require('./Users.controller');\nconst registerUsersRoutes = require('./users.routes');\n\nmodule.exports = (scope) => {\n  scope.register({\n    services: {\n      main: asClass(UsersService).singleton(),\n    },\n    controllers: {\n      main: asClass(UsersController).singleton(),\n    },\n    routes: asValue(registerUsersRoutes),\n  });\n\n  scope.registerAlias('usersController', 'controllers.main');\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:"Container mengekspose ini dengan dot notation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"const controller = container.resolve('modules.users.controllers.main');\n"})}),"\n",(0,i.jsx)(n.h2,{id:"highlight-api-container",children:"Highlight API container"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"register()"})," menerima string + factory atau objek bertingkat."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"resolve()"})," akan error jika dependency tidak ditemukan."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"createScope()"})," membuat accessor grup seperti ",(0,i.jsx)(n.code,{children:"modules.users.services"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cradle"})," menyediakan proxy yang nyaman untuk dependency yang sudah di-resolve."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Testing",type:"tip",children:(0,i.jsx)(n.p,{children:"Karena dependency eksplisit, Anda bisa mengganti implementasi dengan mock di scope test."})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var s=r(6540);const i={},t=s.createContext(i);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);