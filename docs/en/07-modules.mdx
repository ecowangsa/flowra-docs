---
id: modules
slug: /modules/overview
sidebar_position: 7
---

# Modules in Flowra

## Definition
A module is the highest-level unit of organisation in Flowra. It bundles everything needed for a business capability—routes, controllers, services, models, validators, and providers—behind a clear boundary. Modules are registered during bootstrap and can optionally expose CLI generators, scheduled jobs, or background workers.

## Anatomy of a module
```text
app/modules/orders/
├─ http/
│  ├─ controllers/
│  ├─ middlewares/
│  ├─ requests/
│  └─ routes.ts
├─ models/
│  └─ order.model.ts
├─ services/
│  ├─ order.service.ts
│  └─ order-payment.service.ts
├─ subscribers/
│  └─ order-events.subscriber.ts
├─ validators/
│  └─ order-status.validator.ts
├─ providers.ts
└─ index.ts
```

`index.ts` exports module metadata consumed by the bootstrapper:

```ts
import routes from './http/routes';
import {registerOrderModule} from './providers';

export const OrdersModule = {
  name: 'orders',
  basePath: '/orders',
  routes,
  register: registerOrderModule,
};
```

## Registering modules
Modules are registered in `app/providers/index.ts` or `main/bootstrap.ts`.

```ts
import {OrdersModule} from '../modules/orders';
import {UsersModule} from '../modules/users';

export const modules = [OrdersModule, UsersModule];
```

During bootstrap Flowra loops through `modules` and calls `register` (if provided) before mounting routes.

## Recommended boundaries
> **note**
> Keep modules focused on bounded contexts—business concepts that can evolve independently.

- **Per domain** – e.g., `users`, `billing`, `inventory`.
- **Per integration** – external services such as `payments/stripe`, `notifications/slack`.
- **Per workflow** – complicated flows like `onboarding` or `fulfilment` that require multiple steps.

Avoid modules such as `utils` or `shared`. Instead publish reusable services via `app/support` or shared providers.

## Communication between modules
- **Via services** – export services through the container so another module can inject them.
- **Via events** – use `core/events` to broadcast domain events (`OrderPlaced`) and subscribe from other modules.
- **Via HTTP** – mount nested routers (e.g., `app.registerModule(ReportsModule)` under `/reports`).

## Example: Users module
- `providers.ts` registers `UserService`, `UserModel`, and `UserPolicy`.
- `http/routes.ts` exposes `GET /users`, `POST /users`, `GET /users/:id`.
- `services/user.service.ts` orchestrates business logic.
- `validators` enforce request shape with Zod.

## Checklist
> **tip**
> Run `npx flowra make:module <name>`—it scaffolds all folders and provider stubs.

- [ ] Create module via CLI.
- [ ] Register services and models in `providers.ts`.
- [ ] Export module metadata (`name`, `basePath`, `routes`, optional `middlewares`).
- [ ] Add routes and controllers under `http/`.
- [ ] Write integration tests using `core/testing` to validate flows end-to-end.
