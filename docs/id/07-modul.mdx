---
id: modules
slug: /modules/overview
sidebar_position: 7
---

# Modul di Flowra

## Definisi
Modul adalah unit organisasi tertinggi di Flowra. Modul mengemas seluruh kebutuhan sebuah kapabilitas bisnis—route, controller, service, model, validator, dan provider—di dalam batas yang jelas. Modul didaftarkan saat bootstrap dan dapat mengekspor generator CLI, job terjadwal, atau worker latar belakang bila diperlukan.

## Anatomi modul
```text
app/modules/orders/
├─ http/
│  ├─ controllers/
│  ├─ middlewares/
│  ├─ requests/
│  └─ routes.ts
├─ models/
│  └─ order.model.ts
├─ services/
│  ├─ order.service.ts
│  └─ order-payment.service.ts
├─ subscribers/
│  └─ order-events.subscriber.ts
├─ validators/
│  └─ order-status.validator.ts
├─ providers.ts
└─ index.ts
```

`index.ts` mengekspor metadata modul yang dipakai bootstrapper:

```ts
import routes from './http/routes';
import {registerOrderModule} from './providers';

export const OrdersModule = {
  name: 'orders',
  basePath: '/orders',
  routes,
  register: registerOrderModule,
};
```

## Mendaftarkan modul
Modul didaftarkan di `app/providers/index.ts` atau `main/bootstrap.ts`.

```ts
import {OrdersModule} from '../modules/orders';
import {UsersModule} from '../modules/users';

export const modules = [OrdersModule, UsersModule];
```

Saat bootstrap Flowra melakukan iterasi terhadap `modules` dan memanggil `register` (jika ada) sebelum memasang route.

## Batasan yang direkomendasikan
> **note**
> Jaga modul tetap fokus pada bounded context—konsep bisnis yang bisa berkembang mandiri.

- **Per domain** – contoh `users`, `billing`, `inventory`.
- **Per integrasi** – layanan eksternal seperti `payments/stripe`, `notifications/slack`.
- **Per workflow** – alur kompleks seperti `onboarding` atau `fulfilment` yang memerlukan beberapa langkah.

Hindari modul seperti `utils` atau `shared`. Publikasikan service yang dapat dipakai ulang melalui `app/support` atau provider bersama.

## Komunikasi antar modul
- **Lewat service** – ekspor service melalui container agar modul lain bisa meng-inject.
- **Lewat event** – gunakan `core/events` untuk menyiarkan domain event (`OrderPlaced`) dan berlangganan dari modul lain.
- **Lewat HTTP** – pasang router bersarang (mis. `app.registerModule(ReportsModule)` di bawah `/reports`).

## Contoh: modul Users
- `providers.ts` mendaftarkan `UserService`, `UserModel`, dan `UserPolicy`.
- `http/routes.ts` mengekspor `GET /users`, `POST /users`, `GET /users/:id`.
- `services/user.service.ts` mengorkestrasi logika bisnis.
- `validators` memastikan bentuk request menggunakan Zod.

## Checklist
> **tip**
> Jalankan `npx flowra make:module <name>`—perintah ini membuat seluruh folder dan stub provider.

- [ ] Buat modul melalui CLI.
- [ ] Daftarkan service dan model di `providers.ts`.
- [ ] Ekspor metadata modul (`name`, `basePath`, `routes`, opsional `middlewares`).
- [ ] Tambahkan route dan controller di bawah `http/`.
- [ ] Tulis integration test memakai `core/testing` untuk memvalidasi flow end-to-end.
